<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>TALKCA • Video</title>
  <link rel="stylesheet" href="assets/site.css">
  <style>
    .video-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
    }
    .video-thumbnail {
      width: 100%;
      border-radius: 16px;
      cursor: pointer;
      display: block;
    }
    .play-icon-large {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80px;
      height: 56px;
      background: rgba(255,0,0,0.9);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s;
    }
    .play-icon-large::after {
      content: "";
      border-style: solid;
      border-width: 14px 0 14px 24px;
      border-color: transparent transparent transparent white;
      margin-left: 4px;
    }
    .video-container:hover .play-icon-large {
      background: rgba(255,0,0,1);
      transform: translate(-50%, -50%) scale(1.1);
    }
    .video-info {
      max-width: 800px;
      margin: 24px auto 0;
    }
    .video-title {
      font-size: 28px;
      line-height: 1.2;
      margin: 0 0 12px;
    }
    .video-meta {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }
    .video-description {
      color: var(--muted);
      line-height: 1.6;
      margin-bottom: 20px;
    }
    .watch-btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 14px 24px;
      font-size: 16px;
      background: linear-gradient(145deg, rgba(255,0,0,0.9), rgba(200,0,0,0.9));
      border: none;
      border-radius: 14px;
      color: white;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.2s;
    }
    .watch-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(255,0,0,0.3);
    }
    .share-section {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid rgba(30,42,74,.5);
    }
    .share-link {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }
    .share-link input {
      flex: 1;
      min-width: 200px;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid rgba(30,42,74,.75);
      background: rgba(10,16,32,.7);
      color: var(--text);
      font-family: var(--mono);
      font-size: 13px;
    }
    .copy-btn {
      padding: 12px 20px;
      border-radius: 12px;
      border: 1px solid rgba(124,255,178,.4);
      background: rgba(124,255,178,.1);
      color: var(--ok);
      cursor: pointer;
      transition: all 0.2s;
    }
    .copy-btn:hover {
      background: rgba(124,255,178,.2);
    }
    .related-section {
      margin-top: 40px;
    }
    .related-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 14px;
    }
    @media (max-width: 800px) { .related-grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 500px) { .related-grid { grid-template-columns: 1fr; } }
    .thumb-img {
      width: 100%;
      height: 140px;
      object-fit: cover;
      border-bottom: 1px solid rgba(30,42,74,.7);
    }
    .thumb-overlay {
      position: relative;
    }
    .thumb-overlay .thumb-badges {
      position: absolute;
      bottom: 8px;
      left: 8px;
      right: 8px;
      display: flex;
      justify-content: space-between;
    }
    .play-icon-small {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 50px;
      height: 35px;
      background: rgba(255,0,0,0.9);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .play-icon-small::after {
      content: "";
      border-style: solid;
      border-width: 7px 0 7px 12px;
      border-color: transparent transparent transparent white;
      margin-left: 2px;
    }
  </style>
</head>
<body>

<header class="topbar">
  <div class="brand">
    <div class="mark">T</div>
    <div>
      <h1>TALKCA</h1>
      <small>Finance • Data • Intelligence</small>
    </div>
  </div>
  <nav class="nav">
    <a href="index.html">Home</a>
    <a href="explainers.html">Explainers</a>
    <a href="shorts.html">Shorts</a>
  </nav>
</header>

<main class="container">

  <!-- VIDEO PLAYER AREA -->
  <div id="videoPlayer" class="video-container">
    <p class="p">Loading video...</p>
  </div>

  <!-- VIDEO INFO -->
  <div id="videoInfo" class="video-info">
    <p class="p">Loading...</p>
  </div>

  <!-- RELATED VIDEOS -->
  <div id="relatedSection" class="related-section">
    <div class="sectionTitle">
      <h2>Related Videos</h2>
      <a href="explainers.html">View all</a>
    </div>
    <div id="relatedVideos" class="related-grid"></div>
  </div>

  <footer class="footer">
    <div>© <span id="y"></span> TALKCA • Finance • Data • Intelligence</div>
    <div style="display:flex; gap:10px; flex-wrap:wrap;">
      <a class="pill" href="https://www.youtube.com/" target="_blank" rel="noopener">YouTube</a>
      <a class="pill" href="index.html">Home</a>
    </div>
  </footer>

</main>

<script>
let currentVideo = null;
let allVideos = [];

function getYouTubeId(url) {
  if (!url) return null;
  const patterns = [
    /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/shorts\/)([^&\?\/]+)/,
    /^([a-zA-Z0-9_-]{11})$/
  ];
  for (const pattern of patterns) {
    const match = url.match(pattern);
    if (match) return match[1];
  }
  return null;
}

function getThumbnail(url, quality = 'maxresdefault') {
  const videoId = getYouTubeId(url);
  if (videoId) {
    return `https://img.youtube.com/vi/${videoId}/${quality}.jpg`;
  }
  return null;
}

async function loadVideo() {
  const params = new URLSearchParams(window.location.search);
  const videoId = params.get('id');
  
  if (!videoId) {
    showNotFound();
    return;
  }
  
  const localData = localStorage.getItem('talkca_videos');
  if (localData) {
    allVideos = JSON.parse(localData);
  } else {
    try {
      const response = await fetch('data/videos.json');
      if (response.ok) {
        allVideos = await response.json();
        localStorage.setItem('talkca_videos', JSON.stringify(allVideos));
      }
    } catch (e) {
      allVideos = [];
    }
  }
  
  currentVideo = allVideos.find(v => v.id === videoId);
  
  if (!currentVideo) {
    showNotFound();
    return;
  }
  
  renderVideo();
  renderRelated();
}

function showNotFound() {
  document.getElementById('videoPlayer').innerHTML = `
    <div class="card pad" style="text-align:center; padding:60px 20px;">
      <h2 style="margin:0 0 12px;">Video Not Found</h2>
      <p class="p">This video doesn't exist or has been removed.</p>
      <div class="actions" style="justify-content:center; margin-top:20px;">
        <a class="btn primary" href="index.html">Go to Home</a>
      </div>
    </div>
  `;
  document.getElementById('videoInfo').innerHTML = '';
  document.getElementById('relatedSection').style.display = 'none';
}

function renderVideo() {
  document.title = `TALKCA • ${currentVideo.title}`;
  
  const thumbnail = getThumbnail(currentVideo.url, 'maxresdefault');
  const thumbnailFallback = getThumbnail(currentVideo.url, 'hqdefault');
  
  // Video thumbnail with play button
  document.getElementById('videoPlayer').innerHTML = `
    <a href="${currentVideo.url}" target="_blank" rel="noopener" style="display:block; position:relative;">
      <img 
        src="${thumbnail}" 
        alt="${currentVideo.title}" 
        class="video-thumbnail"
        onerror="this.src='${thumbnailFallback}'"
      >
      <div class="play-icon-large"></div>
    </a>
  `;
  
  // Video info
  const shareUrl = window.location.href;
  
  document.getElementById('videoInfo').innerHTML = `
    <h1 class="video-title">${currentVideo.title}</h1>
    
    <div class="video-meta">
      <span class="pill">${currentVideo.type === 'long' ? 'Explainer' : 'Short'}</span>
      <span class="pill">${currentVideo.topic}</span>
      <span class="pill">${currentVideo.duration || '5-10 min'}</span>
      <span class="pill">${currentVideo.date}</span>
    </div>
    
    <p class="video-description">${currentVideo.description}</p>
    
    <a href="${currentVideo.url}" target="_blank" rel="noopener" class="watch-btn">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
        <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
      </svg>
      Watch on YouTube
    </a>
    
    <div class="share-section">
      <div class="kicker" style="margin-bottom:10px;">Share This Video</div>
      <div class="share-link">
        <input type="text" id="shareUrl" value="${shareUrl}" readonly onclick="this.select()">
        <button class="copy-btn" onclick="copyLink()">Copy Link</button>
      </div>
      <p class="note" style="margin-top:10px;">Share this link with friends!</p>
    </div>
  `;
}

function renderRelated() {
  const related = allVideos
    .filter(v => v.id !== currentVideo.id && v.topic === currentVideo.topic)
    .slice(0, 3);
  
  // If not enough from same topic, add others
  if (related.length < 3) {
    const others = allVideos
      .filter(v => v.id !== currentVideo.id && !related.includes(v))
      .slice(0, 3 - related.length);
    related.push(...others);
  }
  
  const container = document.getElementById('relatedVideos');
  
  if (related.length === 0) {
    container.innerHTML = '<p class="note">No related videos yet.</p>';
    return;
  }
  
  container.innerHTML = related.map(video => {
    const thumb = getThumbnail(video.url, 'mqdefault');
    const badgeClass = video.type === 'short' ? 'badge short' : 'badge';
    const badgeText = video.type === 'short' ? 'Short' : 'Long';
    
    return `
      <a class="card videoCard" href="video.html?id=${video.id}">
        <div class="thumb-overlay">
          <img src="${thumb}" alt="${video.title}" class="thumb-img">
          <div class="play-icon-small"></div>
          <div class="thumb-badges">
            <span class="${badgeClass}" style="font-size:10px; padding:5px 7px;">${badgeText}</span>
          </div>
        </div>
        <div class="vBody">
          <h3 style="font-size:14px;">${video.title}</h3>
          <p style="font-size:12px;">${video.description.substring(0, 60)}...</p>
        </div>
      </a>
    `;
  }).join('');
}

function copyLink() {
  const input = document.getElementById('shareUrl');
  input.select();
  document.execCommand('copy');
  
  const btn = document.querySelector('.copy-btn');
  btn.textContent = 'Copied!';
  setTimeout(() => btn.textContent = 'Copy Link', 2000);
}

document.getElementById('y').textContent = new Date().getFullYear();
loadVideo();
</script>

</body>
</html>
```

## Step 4: Click "Commit changes" → "Commit changes"

---

## Test It!

1. Wait 1-2 minutes
2. Go to: `https://talkcaweb.pages.dev`
3. Press `Ctrl + Shift + R`
4. Click any video
5. You should see:
   - ✅ Video thumbnail (large)
   - ✅ Title, description, topic
   - ✅ "Watch on YouTube" button
   - ✅ **Share This Video** section with copyable link!
   - ✅ Related videos

---

## How to Share a Video:

1. Click any video on your site
2. Scroll down to "Share This Video"
3. Click "Copy Link"
4. Share it anywhere!

**Example link:**
```
https://talkcaweb.pages.dev/video.html?id=v1736409876543
