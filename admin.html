<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>TALKCA • Admin</title>
  <link rel="stylesheet" href="assets/site.css">
  <style>
    .admin-panel { max-width: 780px; margin: 30px auto; }
    .form-group { margin-bottom: 16px; }
    .form-group label { display: block; color: var(--muted); font-size: 13px; margin-bottom: 6px; }
    .form-group input, .form-group select, .form-group textarea {
      width: 100%; padding: 12px 14px; border-radius: 12px;
      border: 1px solid rgba(30,42,74,.75); background: rgba(10,16,32,.7);
      color: var(--text); font-family: inherit; font-size: 14px; outline: none;
    }
    .form-group textarea { min-height: 100px; resize: vertical; }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .error-msg { background: rgba(255,100,100,.15); border: 1px solid rgba(255,100,100,.3); color: #ff9999; padding: 12px; border-radius: 12px; margin-bottom: 16px; display: none; }
    .success-msg { background: rgba(124,255,178,.1); border: 1px solid rgba(124,255,178,.3); color: var(--ok); padding: 12px; border-radius: 12px; margin-bottom: 16px; display: none; }
    .video-list { margin-top: 24px; }
    .video-item { display: flex; align-items: center; justify-content: space-between; gap: 12px; padding: 14px 16px; border: 1px solid rgba(30,42,74,.6); border-radius: 12px; margin-bottom: 10px; background: rgba(10,16,32,.5); }
    .video-item-info h4 { margin: 0 0 4px; font-size: 14px; }
    .video-item-info span { font-size: 12px; color: var(--muted); }
    .video-item-actions { display: flex; gap: 8px; }
    .btn-small { padding: 8px 12px; font-size: 12px; border-radius: 10px; }
    .btn-danger { border-color: rgba(255,100,100,.4); color: #ff9999; }
    .tabs { display: flex; gap: 8px; margin-bottom: 20px; border-bottom: 1px solid rgba(30,42,74,.6); padding-bottom: 12px; }
    .tab { padding: 10px 16px; border-radius: 10px; cursor: pointer; color: var(--muted); border: 1px solid transparent; }
    .tab.active { color: var(--text); background: rgba(255,211,106,.1); border-color: rgba(255,211,106,.3); }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .featured-badge { display: inline-block; padding: 4px 8px; background: rgba(255,211,106,.15); border: 1px solid rgba(255,211,106,.3); border-radius: 6px; font-size: 10px; color: var(--accent); text-transform: uppercase; margin-left: 8px; }
    .code-output { background: rgba(7,11,20,.8); border: 1px solid rgba(30,42,74,.7); border-radius: 12px; padding: 16px; font-family: var(--mono); font-size: 12px; color: var(--muted); max-height: 300px; overflow: auto; white-space: pre-wrap; }
  </style>
</head>
<body>
<header class="topbar">
  <div class="brand">
    <div class="mark">T</div>
    <div><h1>TALKCA</h1><small>Admin Panel</small></div>
  </div>
  <nav class="nav">
    <a href="index.html">Home</a>
    <a href="explainers.html">Explainers</a>
    <a href="shorts.html">Shorts</a>
    <a class="active" href="admin.html">Admin</a>
  </nav>
</header>
<main class="container">
  <section class="admin-panel">
    <div class="card pad">
      <div style="margin-bottom:16px;">
        <div class="kicker">Content Manager</div>
        <h2 style="margin:6px 0 0; font-size:20px;">Add and Manage Videos</h2>
      </div>
      <div class="tabs">
        <div class="tab active" onclick="switchTab('add')">Add New</div>
        <div class="tab" onclick="switchTab('manage')">Manage Videos</div>
        <div class="tab" onclick="switchTab('export')">Export Data</div>
      </div>
      <div id="tab-add" class="tab-content active">
        <div id="addSuccess" class="success-msg">Video added!</div>
        <div id="addError" class="error-msg">Please fill required fields.</div>
        <div class="form-group"><label>Video Title *</label><input type="text" id="videoTitle" placeholder="e.g., The $1 Salary Problem" /></div>
        <div class="form-group"><label>YouTube URL *</label><input type="url" id="videoUrl" placeholder="https://www.youtube.com/watch?v=..." /></div>
        <div class="form-row">
          <div class="form-group"><label>Type *</label><select id="videoType"><option value="long">Explainer (Long)</option><option value="short">Short</option></select></div>
          <div class="form-group"><label>Topic *</label><select id="videoTopic"><option value="Inflation">Inflation</option><option value="Currency">Currency</option><option value="GDP & Rankings">GDP & Rankings</option><option value="Markets">Markets</option><option value="Personal Finance">Personal Finance</option></select></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>Duration</label><input type="text" id="videoDuration" placeholder="e.g., 8-10 min" /></div>
          <div class="form-group"><label>Publish Date</label><input type="date" id="videoDate" /></div>
        </div>
        <div class="form-group"><label>Short Description *</label><textarea id="videoDesc" placeholder="A brief description..."></textarea></div>
        <div class="form-group"><label><input type="checkbox" id="videoFeatured" style="width:auto; margin-right:8px;" />Set as Featured Video</label></div>
        <button class="btn primary" onclick="addVideo()" style="width:100%;">Add Video</button>
      </div>
      <div id="tab-manage" class="tab-content">
        <div class="form-row" style="margin-bottom:16px;">
          <div class="form-group" style="margin-bottom:0;"><select id="filterType" onchange="renderVideoList()"><option value="all">All Types</option><option value="long">Explainers Only</option><option value="short">Shorts Only</option></select></div>
          <div class="form-group" style="margin-bottom:0;"><input type="text" id="searchVideos" placeholder="Search..." oninput="renderVideoList()" /></div>
        </div>
        <div id="videoList" class="video-list"></div>
      </div>
      <div id="tab-export" class="tab-content">
        <p class="p" style="margin-bottom:16px;">Copy JSON to update your site.</p>
        <div class="actions" style="margin-bottom:16px;">
          <button class="btn primary" onclick="copyExport()">Copy</button>
          <button class="btn" onclick="downloadExport()">Download</button>
        </div>
        <div id="exportOutput" class="code-output"></div>
        <div style="margin-top:20px; padding-top:20px; border-top:1px solid rgba(30,42,74,.5);">
          <div class="kicker" style="margin-bottom:8px;">Import Data</div>
          <textarea id="importData" placeholder="Paste JSON here..." style="width:100%; min-height:60px; margin-bottom:12px; padding:12px; border-radius:12px; border:1px solid rgba(30,42,74,.75); background:rgba(10,16,32,.7); color:var(--text); font-family:var(--mono); font-size:12px;"></textarea>
          <button class="btn" onclick="importVideos()">Import</button>
        </div>
      </div>
    </div>
  </section>
</main>
<div id="editModal" style="display:none; position:fixed; inset:0; background:rgba(7,11,20,.9); z-index:100; overflow:auto; padding:40px 20px;">
  <div class="card pad" style="max-width:600px; margin:0 auto;">
    <div style="display:flex; justify-content:space-between; margin-bottom:20px;"><h2 style="margin:0; font-size:18px;">Edit Video</h2><button class="btn btn-small" onclick="closeEditModal()">Cancel</button></div>
    <div class="form-group"><label>Title</label><input type="text" id="editTitle" /></div>
    <div class="form-group"><label>YouTube URL</label><input type="url" id="editUrl" /></div>
    <div class="form-row">
      <div class="form-group"><label>Type</label><select id="editType"><option value="long">Explainer</option><option value="short">Short</option></select></div>
      <div class="form-group"><label>Topic</label><select id="editTopic"><option value="Inflation">Inflation</option><option value="Currency">Currency</option><option value="GDP & Rankings">GDP & Rankings</option><option value="Markets">Markets</option><option value="Personal Finance">Personal Finance</option></select></div>
    </div>
    <div class="form-row">
      <div class="form-group"><label>Duration</label><input type="text" id="editDuration" /></div>
      <div class="form-group"><label>Date</label><input type="date" id="editDate" /></div>
    </div>
    <div class="form-group"><label>Description</label><textarea id="editDesc"></textarea></div>
    <div class="form-group"><label><input type="checkbox" id="editFeatured" style="width:auto; margin-right:8px;" />Featured</label></div>
    <input type="hidden" id="editIndex" />
    <button class="btn primary" onclick="saveEdit()" style="width:100%;">Save</button>
  </div>
</div>
<script>
function getVideos(){const d=localStorage.getItem('talkca_videos');return d?JSON.parse(d):[{id:'v1',title:'Sample Video',url:'https://www.youtube.com/',type:'long',topic:'Inflation',duration:'8-10 min',date:'2026-01-08',description:'Sample description.',featured:true}];}
function saveVideos(v){localStorage.setItem('talkca_videos',JSON.stringify(v));}
function switchTab(t){document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));document.querySelectorAll('.tab-content').forEach(x=>x.classList.remove('active'));event.target.classList.add('active');document.getElementById('tab-'+t).classList.add('active');if(t==='export')updateExport();if(t==='manage')renderVideoList();}
function addVideo(){const title=document.getElementById('videoTitle').value.trim();const url=document.getElementById('videoUrl').value.trim();const type=document.getElementById('videoType').value;const topic=document.getElementById('videoTopic').value;const duration=document.getElementById('videoDuration').value.trim();const date=document.getElementById('videoDate').value;const description=document.getElementById('videoDesc').value.trim();const featured=document.getElementById('videoFeatured').checked;if(!title||!url||!description){document.getElementById('addError').style.display='block';document.getElementById('addSuccess').style.display='none';return;}const videos=getVideos();if(featured)videos.forEach(v=>v.featured=false);videos.unshift({id:'v'+Date.now(),title,url,type,topic,duration:duration||(type==='long'?'5-10 min':'30 sec'),date:date||new Date().toISOString().split('T')[0],description,featured});saveVideos(videos);document.getElementById('videoTitle').value='';document.getElementById('videoUrl').value='';document.getElementById('videoDuration').value='';document.getElementById('videoDate').value=new Date().toISOString().split('T')[0];document.getElementById('videoDesc').value='';document.getElementById('videoFeatured').checked=false;document.getElementById('addSuccess').style.display='block';document.getElementById('addError').style.display='none';setTimeout(()=>document.getElementById('addSuccess').style.display='none',3000);}
function renderVideoList(){const videos=getVideos();const filterType=document.getElementById('filterType').value;const searchQuery=document.getElementById('searchVideos').value.toLowerCase();let filtered=videos;if(filterType!=='all')filtered=filtered.filter(v=>v.type===filterType);if(searchQuery)filtered=filtered.filter(v=>v.title.toLowerCase().includes(searchQuery));const container=document.getElementById('videoList');if(filtered.length===0){container.innerHTML='<p class="note">No videos found.</p>';return;}container.innerHTML=filtered.map(video=>{const idx=videos.findIndex(v=>v.id===video.id);return'<div class="video-item"><div class="video-item-info"><h4>'+video.title+(video.featured?'<span class="featured-badge">Featured</span>':'')+'</h4><span>'+(video.type==='long'?'Explainer':'Short')+' • '+video.topic+'</span></div><div class="video-item-actions"><button class="btn btn-small" onclick="editVideo('+idx+')">Edit</button><button class="btn btn-small btn-danger" onclick="deleteVideo('+idx+')">Delete</button></div></div>';}).join('');}
function deleteVideo(i){if(!confirm('Delete this video?'))return;const v=getVideos();v.splice(i,1);saveVideos(v);renderVideoList();}
function editVideo(i){const v=getVideos()[i];document.getElementById('editTitle').value=v.title;document.getElementById('editUrl').value=v.url;document.getElementById('editType').value=v.type;document.getElementById('editTopic').value=v.topic;document.getElementById('editDuration').value=v.duration;document.getElementById('editDate').value=v.date;document.getElementById('editDesc').value=v.description;document.getElementById('editFeatured').checked=v.featured;document.getElementById('editIndex').value=i;document.getElementById('editModal').style.display='block';}
function closeEditModal(){document.getElementById('editModal').style.display='none';}
function saveEdit(){const i=parseInt(document.getElementById('editIndex').value);const v=getVideos();const f=document.getElementById('editFeatured').checked;if(f)v.forEach(x=>x.featured=false);v[i]={...v[i],title:document.getElementById('editTitle').value.trim(),url:document.getElementById('editUrl').value.trim(),type:document.getElementById('editType').value,topic:document.getElementById('editTopic').value,duration:document.getElementById('editDuration').value.trim(),date:document.getElementById('editDate').value,description:document.getElementById('editDesc').value.trim(),featured:f};saveVideos(v);closeEditModal();renderVideoList();}
function updateExport(){document.getElementById('exportOutput').textContent=JSON.stringify(getVideos(),null,2);}
function copyExport(){navigator.clipboard.writeText(document.getElementById('exportOutput').textContent).then(()=>alert('Copied!'));}
function downloadExport(){const b=new Blob([JSON.stringify(getVideos(),null,2)],{type:'application/json'});const a=document.createElement('a');a.href=URL.createObjectURL(b);a.download='videos.json';a.click();}
function importVideos(){const d=document.getElementById('importData').value.trim();if(!d){alert('Paste JSON first.');return;}try{const v=JSON.parse(d);if(!Array.isArray(v))throw 0;saveVideos(v);alert('Imported!');renderVideoList();updateExport();document.getElementById('importData').value='';}catch(e){alert('Invalid JSON.');}}
document.addEventListener('DOMContentLoaded',()=>{document.getElementById('videoDate').value=new Date().toISOString().split('T')[0];renderVideoList();});
</script>
</body>
</html>
